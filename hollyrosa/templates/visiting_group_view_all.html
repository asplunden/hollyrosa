<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
Copyright 2010, 2011 Martin Eliasson

This file is part of Hollyrosa

Hollyrosa is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Hollyrosa is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with Hollyrosa.  If not, see <http://www.gnu.org/licenses/>.

-->

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>Hollyrosa - Viewing Visiting Groups</title>
</head>

<body>
    Choose time period: <ul class="any_menu">

        <li><a href="${tg.url('view_today')}">today</a></li>
        <li><a href="${tg.url('view_period', period='1an')}">1:an</a></li>
        <li><a href="${tg.url('view_period', period='2an')}">2:an</a></li>
        <li><a href="${tg.url('view_at_date', at_date='2011-06-14')}">Miniscout I</a></li>
        <li><a href="${tg.url('view_at_date', at_date='2011-06-18')}">Miniscout II</a></li>
        <li><a href="${tg.url('view_date_range', fromdate='2011-08-01', todate='2011-08-14')}">60DN</a></li>
        
        <li><span class="context_dropdown_menu">view by status<ul><li py:for="k,v in bokn_status_map.items()"><a href="${tg.url('view_boknstatus', boknstatus=k)}">${v}</a></li></ul></span></li>
        <li><span class="context_dropdown_menu">view by tag<ul><li py:for="tag in all_tags"><a href="${tg.url('view_tags', tag=tag)}">${tag}</a></li></ul></span></li>
    </ul>
    <h2>Viewing visiting groups</h2>
    <table>
        <tr py:for="visiting_group in visiting_groups">
            <td class="info data">${visiting_group.name}<a name="vgroupid_${visiting_group._id}"/><ul class="any_menu context_inline_menu ">
                    <li><a href="${tg.url('show_visiting_group', id=visiting_group._id)}">show</a></li>
                    <li><a href="${tg.url('edit_visiting_group', id=visiting_group._id)}">edit</a></li>
                    <li><a href="${tg.url('/note/add_note', target_id=visiting_group._id)}">add note</a></li>
                    <li><a href="${tg.url('view_bookings_of_name', name=visiting_group.name)}">list activities</a></li>
                    <li><a href="${tg.url('/history/show', visiting_group_id=visiting_group._id)}">show history</a></li>
                    <li><a href="${tg.url('/booking/edit_booking', visiting_group_id=visiting_group._id)}">new booking request</a></li>
                </ul>
            </td>
            <td class="info data">[${reFormatDate(visiting_group.from_date)} to ${reFormatDate(visiting_group.to_date)}]<br/><br/>${visiting_group.contact_person}<br/>$visiting_group.contact_person_phone<br/><a href="mailto:$visiting_group.contact_person_email">$visiting_group.contact_person_email</a></td>
            <td class="info data"><ul class="tag_list" style="display:inline; font-size:80%; text-decoration:italic;" py:for="tag in visiting_group.get('tags',[])"><li>$tag</li></ul>
            <div class="note">bok.nr: <b>${visiting_group.boknr}</b> <br/>bokn.status: <b>${bokn_status_map.get(visiting_group.boknstatus, '')}</b><br/>${HTML(visiting_group.info)}</div></td>
        </tr>
    </table>
    <h2>Visiting group names used that not is in any registered group</h2>
    <ul>
        <li py:for="v in remaining_visiting_group_names">"${v}" <a href="${tg.url('view_bookings_of_name', name=v)}">List all activities</a></li>
    </ul>
</body>
</html>
