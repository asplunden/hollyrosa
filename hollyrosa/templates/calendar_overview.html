<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
Copyright 2010, 2011, 2012 Martin Eliasson

This file is part of Hollyrosa

Hollyrosa is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Hollyrosa is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with Hollyrosa.  If not, see <http://www.gnu.org/licenses/>.

-->

<?python
import datetime
def makeDate(s):
    return datetime.datetime.strptime(s, '%Y-%m-%d')

?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>Hollyrosa - Calendar Overview</title>
</head>

<body>
    <h2>Calendar Overview</h2>
    <table class="data">
        <tr><th>Day</th><th>Note</th></tr>
        <tr py:for="booking_day in booking_days" style="${['','background:#fdd;'][6==makeDate(booking_day['date']).weekday()]}" class="calendar_overview"> 
            <td class="data info"><a href="${tg.url('/booking/day',day_id=str(booking_day['_id']))}">${makeDate(booking_day['date']).strftime('%A %d %b')}</a><br/> <!-- .strftime('%A %d %b') --> 
                <ul class="any_menu context_inline_menu">
                    <li><a href="${url('/visiting_group/view_at_date', at_date=booking_day['date'])}">Visiting groups this day</a></li>
                    <li><a href="${url('/booking/fladan_day', ag='activity_group.6', day=booking_day['date'])}">Fladan schema</a></li>
                    <li><a href="${url('/booking/fladan_day', ag='activity_group.1', day=booking_day['date'])}">Trapper schema</a></li>
                    <li><a href="${url('/booking/fladan_day', day=booking_day['date'])}">All Day schema</a></li>
                </ul> 
            </td>
            <td class="data info"><h2>${booking_day.get('title','')}</h2>
            <ul py:if="booking_day.has_key('events')" ><li py:for="e in booking_day['events']">$e</li></ul>            
            ${HTML(booking_day['note'])}</td>
        </tr>
        
    </table>
</body>
</html>
